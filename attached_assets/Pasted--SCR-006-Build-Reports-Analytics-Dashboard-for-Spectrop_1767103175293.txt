# üìä SCR‚Äë006: Build Reports & Analytics Dashboard for Spectropy PMS (React + Recharts)

---

## üéØ GOAL
Create a fully functional Reports Dashboard at route `/reports` using **live project/task/user data from backend**.

---

## üìÅ Files to Create/Update

| File | Purpose |
|------|---------|
| `/frontend/src/pages/Reports.jsx` | Main reports dashboard |
| `/frontend/src/components/ReportCharts/*.jsx` | Modular chart components (bar, pie, summary) |
| `/backend/routes/reports.js` | New Express route to serve report metrics |
| `/backend/controllers/reportController.js` | Logic to compute summaries from DB |
| `/shared/schema.js` | Confirm models for `User`, `Project`, `Task`, `Bucket` |

---

## üß© FRONTEND LAYOUT INSTRUCTIONS

### Page: `/reports`
Create a full-width layout with:
- Top Header: `"Reports & Insights"`
- Filters Section (Project/User/Date Range)
- Summary KPI Cards (top)
- 4 Graph Sections (below)
- Responsive grid layout

---

## üßÆ COMPONENTS (DATA-DRIVEN)

### ‚úÖ 1. Filter Bar
- Project Dropdown
- User Dropdown
- Time Range (Today, This Week, Custom)
- Button: `Reset Filters`

‚Üí Trigger filtered data via API call.

---

### ‚úÖ 2. Summary Cards (Top Metrics)
Component: `<SummaryCard />`
- Total Projects
- Total Tasks
- Total Active Users

Show animated count-up using Framer Motion.

```js
// Sample from backend
{
  totalProjects: 8,
  totalTasks: 129,
  activeUsers: 11
}
```

---

### ‚úÖ 3. Project-wise Progress Chart
Component: `<ProjectProgressChart />`
- Bar Chart showing:
  - X: Project Names
  - Y: % Completion (completed / total tasks)
- Tooltip: Hover shows detailed numbers
- Colors: Primary and green gradient

Backend sample:
```js
[
  { name: "LMS", completed: 40, total: 50 },
  { name: "Website", completed: 25, total: 40 }
]
```

---

### ‚úÖ 4. User-wise Task Completion Chart
Component: `<UserPerformanceChart />`
- Horizontal bar
- X: Number of Tasks
- Y: User Names
- Toggle Button:
  - Tasks Completed
  - Average Time Spent per Task (Estimated vs Actual)

Backend sample:
```js
[
  { user: "Anjali", completed: 15, avgTime: 2.1 },
  { user: "Ravi", completed: 24, avgTime: 3.3 }
]
```

---

### ‚úÖ 5. Stage-wise Bottleneck Chart
Component: `<BucketBottleneckChart />`
- Pie or Donut
- Show task distribution per bucket (To Do, In Progress, Done)
- Highlight buckets where task count > 10

Sample:
```js
[
  { bucket: "To Do", count: 35 },
  { bucket: "In Progress", count: 20 },
  { bucket: "Done", count: 40 }
]
```

---

### ‚úÖ 6. Global Status Breakdown
Component: `<TaskStatusChart />`
- Stacked Bar
- Task counts in status groups
- Use bright modern colors

Sample:
```js
[
  { status: "To Do", count: 42 },
  { status: "In Progress", count: 30 },
  { status: "Blocked", count: 5 },
  { status: "Completed", count: 52 }
]
```

---

## üîå BACKEND ‚Äì REPORT API ROUTES

Create `/api/reports` with endpoints:
```js
GET /api/reports/summary
GET /api/reports/project-progress
GET /api/reports/user-performance
GET /api/reports/bucket-stats
GET /api/reports/status-breakdown
```

Controller functions should:
- Query PostgreSQL using Sequelize/Prisma/Knex
- Aggregate count/sum/group by results
- Return JSON to frontend
- Use proper filters (by user/project/date if query params passed)

---

## üíÖ DESIGN & THEME

| Area | Style |
|------|-------|
| Theme | Light Mode |
| Fonts | Use `font-mono` for charts, `font-semibold` for headers |
| Animations | Framer Motion for card entrance |
| Responsiveness | Stacked mobile layout |
| Dev21 Palette | Primary: `#4f46e5`, Accent: `#22d3ee`, Background: `#f9fafb` |

---

## üìå INTEGRATION NOTES

- Frontend should use `useQuery()` from React Query for fetching each chart‚Äôs data separately.
- Show loading spinners while fetching.
- Backend should use caching where possible.
- All errors should be gracefully handled with a ‚ÄúNo Data Available‚Äù fallback UI.

---

## ‚úÖ FINAL DELIVERABLE
A complete, data-driven `/reports` page that:
- Loads from backend in real-time
- Allows filtering
- Shows 5 interactive chart sections
- Is visually sleek, responsive, and dev21 styled

Once this screen is done, we will move to:
- SCR‚Äë007: Task Modal Enhancements
- SCR‚Äë008: Admin Management Panel
