# ğŸ”„ Phaseâ€‘5: TEAM PLANNER â†’ Project Grid + Kanban Board (Microsoft Planner Model)

We are updating Spectropy PMS to match Microsoft Planner / Team Planner behavior.

---

## ğŸ¯ OBJECTIVE
Add a **Team Planner flow**:
1. `/projects` should show a **grid of project cards** (not list)
2. Clicking a project card â†’ Open `/projects/:id/board`
3. On board: full **Kanban planner** with:
   - Custom Buckets (create/delete/rename)
   - Custom Tasks (create/edit/delete)
   - Drag & Drop **tasks between buckets**
   - Drag & Drop **bucket ordering**
   - Task modal with:
        - Title, Description
        - Assigned User
        - Estimated Time (Hours + Minutes)
        - Priority (Low/Med/High)
        - Status
        - Activity/History Log
   - All changes saved locally for now (later via DB)

---

## ğŸ“ FILES TO UPDATE / CREATE

### PROJECTS GRID VIEW (Replace Old Project List)
Create or update:
```
/frontend/src/pages/Projects.jsx
```
ğŸ”¹ Show projects as **cards** in a grid.  
ğŸ”¹ When clicked â†’ navigate to `/projects/:id/board`.

Example desired JSX structure (Replit should generate):
```
<div className="grid md:grid-cols-3 gap-6">
  <button onClick={...} className="rounded-xl border shadow hover:scale-105 transition">
    <h3>Project Name</h3>
    <p>Owner â€¢ Status â€¢ Tasks count</p>
  </button>
</div>
```


### KANBAN BOARD VIEW (TEAM PLANNER MODEL)
Create:
```
/frontend/src/pages/ProjectBoard.jsx
```

Requirements for this file:
- Use `useParams()` to get projectId
- UI layout: horizontal scrollable buckets â†’ tasks inside each
- Buckets are draggable
- Tasks are draggable
- â€œ+ Add Bucketâ€ button at the end
- Each bucket contains â€œ+ Add Taskâ€ button
- Task modal pops up to create/edit task details
- Maintain data in component state for now

---

## ğŸ”§ FEATURES TO IMPLEMENT

### âœ” 1. Custom Buckets
- Data structure:
```js
buckets = [
  { id: "bucket1", title: "To Do", position: 0 },
  { id: "bucket2", title: "In Progress", position: 1 },
  ...
]
```
- User can:
  - Create bucket
  - Rename bucket
  - Delete bucket
  - Drag bucket to reorder

### âœ” 2. Custom Tasks
- Data structure:
```js
tasks = [
  {
    id: "task-1",
    title: "Sample Task",
    bucketId: "bucket1",
    assigned: "Ravi",
    estimate: "2h 30m",
    priority: "High",
    history: [
      "Created on 2025â€‘01â€‘01",
      "Moved to In Progress on 2025â€‘01â€‘03"
    ]
  }
]
```
- Task Modal Inputs:
  - Title
  - Description
  - Time Estimate (Hrs + Mins)
  - Assignee
  - Priority
  - Add Activity Log on update/move

### âœ” 3. Drag & Drop (Buckets + Tasks)
- Use `react-beautiful-dnd` (preferred) OR basic browser drag-drop
- Replit should install dependency if needed

### âœ” 4. Task History Tracking
Whenever:
- Edited
- Moved bucket
- Changed priority

Append history string:
```
history.push(`Moved to ${bucket.title} on ${new Date().toLocaleString()}`)
```

### âœ” 5. UI/UX
- Light mode only â€” full update
- Use clean colors, shadows, soft borders

---

## ğŸ” OTP CONNECTION TO BACKEND
(Registration â†’ validate OTP before creating user)

### BACKEND TASKS
In `/backend/routes/auth.js` (or similar):
- `POST /api/auth/send-otp`
- `POST /api/auth/verify-otp`
- `POST /api/auth/register` should ONLY run if OTP verified

OTP storage:
```js
const otpMap = new Map();
otpMap.set(email, { code: generatedOTP, expires: Date.now() + 5*60*1000 });
```

Frontend update in `/frontend/src/pages/Auth.jsx`:
- On â€œSend OTPâ€ â†’ call `/send-otp`
- On Submit â†’ call `/verify-otp` THEN register

**IMPORTANT**
If OTP fails â†’ show error â€œInvalid OTP, try againâ€

---

## âš ï¸ CRITICAL CHECKPOINTS

| Function | Condition |
|----------|------------|
| Reâ€‘load board | Should keep bucket order / task order temporarily in local state |
| Navigation | `/projects` â†’ `/projects/:id/board` |
| Access | Block direct access without login |
| Theme | ALL pages â†’ light mode |
| Back button | from auth â†’ go to `/` |
| OTP | must run before register |

---

## ğŸ FINAL EXPECTED OUTCOME FOR THIS PHASE

- [x] `/projects` now shows Grid UI like Team/Planner
- [x] `/projects/:id/board` works like Team Planner board
- [x] Custom buckets and tasks working
- [x] Drag/drop supported
- [x] Task history tracking enabled
- [x] OTP backend active (for Phaseâ€‘3 onwards)


â–¶ï¸ Once done, we move to **Phaseâ€‘6: Global Reporting + Time Analytics**
