# üß© Phase 3 ‚Äì SCR-002: Layout Shell & Navigation Structure

---

## ‚úÖ OBJECTIVE

We are building the **global layout shell** that wraps all authenticated pages:

- Fixed **Left Sidebar** with navigation links
- Dynamic **Right Content Area** to render selected page
- **Top Right Corner**: Logout button
- Visual consistency using **Spectropy dev21 dark theme**

This layout should be reused for:
- `/dashboard`
- `/projects`
- `/reports`
- `/users`
- etc.

---

## üìÅ FILE STRUCTURE

Create a new layout component at:
```
/frontend/src/layouts/MainLayout.jsx
```

Update your routes to wrap all protected pages inside this layout.

---

## üîß WHAT IT DOES

- Displays a sidebar on the left with navigation items (icon + label)
- Renders the current screen on the right using React Router‚Äôs `Outlet`
- Includes a logout button (top right)
- Sidebar highlights active route
- Responsive and scroll-friendly

---

## üß± COMPONENT SCAFFOLD: `MainLayout.jsx`

```jsx
import { Link, Outlet, useLocation, useNavigate } from "react-router-dom";
import { useEffect } from "react";

const navItems = [
  { label: "Dashboard", path: "/dashboard" },
  { label: "Projects", path: "/projects" },
  { label: "Reports", path: "/reports" },
  { label: "Users", path: "/users" }
];

const MainLayout = () => {
  const location = useLocation();
  const navigate = useNavigate();

  const handleLogout = () => {
    localStorage.removeItem("userRole");
    navigate("/auth");
  };

  useEffect(() => {
    document.title = "Spectropy PMS";
  }, []);

  return (
    <div className="min-h-screen flex text-white bg-background font-sans">
      {/* LEFT SIDEBAR */}
      <div className="w-60 bg-slate-900 border-r border-slate-800 p-4 space-y-6">
        <h1 className="text-xl font-bold text-primary mb-4">Spectropy PMS</h1>
        <nav className="space-y-2">
          {navItems.map((item) => (
            <Link
              key={item.path}
              to={item.path}
              className={`block px-3 py-2 rounded-md transition ${
                location.pathname === item.path
                  ? "bg-primary text-white"
                  : "text-slate-300 hover:bg-slate-800"
              }`}
            >
              {item.label}
            </Link>
          ))}
        </nav>
        <div className="absolute bottom-6 left-6">
          <button
            onClick={handleLogout}
            className="text-accent hover:underline"
          >
            Logout
          </button>
        </div>
      </div>

      {/* RIGHT CONTENT AREA */}
      <main className="flex-1 p-6 overflow-y-auto animate-fade">
        <Outlet />
      </main>
    </div>
  );
};

export default MainLayout;
```

---

## üõ†Ô∏è UPDATE ROUTER TO USE LAYOUT

In `App.jsx` or wherever your routes are defined:

```jsx
import MainLayout from "./layouts/MainLayout";
import Dashboard from "./pages/Dashboard";
import MyProjects from "./pages/MyProjects";
import Reports from "./pages/Reports";
import Users from "./pages/Users";

import ProtectedRoute from "./routes/ProtectedRoute";

<Route path="/dashboard" element={
  <ProtectedRoute role="Admin">
    <MainLayout>
      <Dashboard />
    </MainLayout>
  </ProtectedRoute>
} />

<Route path="/projects" element={
  <ProtectedRoute>
    <MainLayout>
      <MyProjects />
    </MainLayout>
  </ProtectedRoute>
} />

{/* You can also do this using nested routes and <Outlet /> */}
```

Or ideally:

```jsx
<Route element={<ProtectedRoute><MainLayout /></ProtectedRoute>}>
  <Route path="/dashboard" element={<Dashboard />} />
  <Route path="/projects" element={<MyProjects />} />
  <Route path="/reports" element={<Reports />} />
  <Route path="/users" element={<Users />} />
</Route>
```

---

## ‚ö†Ô∏è BE CAREFUL ABOUT

| Feature | Detail |
|--------|--------|
| Sidebar Nav | Keep sidebar sticky and accessible |
| Active Highlight | Use `location.pathname` to highlight current route |
| Responsive Layout | Ensure sidebar + content panel are usable on small screens |
| Logout | Clear localStorage and route to `/auth` |
| Reusability | Use `<Outlet />` for child components ‚Äì keeps layout consistent |

---

## ‚úÖ ONCE COMPLETE

You are now ready to:
- Build screen-by-screen (SCR-003 onwards)
  - `/dashboard` with project overview
  - `/projects` with list & kanban board
  - `/reports` with filters and graphs
  - `/users` to manage team roles and stats

Would you like me to generate prompt for **SCR-003: Dashboard Screen (Admin View)** next?
